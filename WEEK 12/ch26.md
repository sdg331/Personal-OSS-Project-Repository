다음은 **`26. 9-2 커밋 이력 수정.pdf`** 파일을 완벽하게 분석하여 작성한 강의 노트입니다.

**A+를 위한 핵심 포인트**:

1.  \*\*최신 커밋 수정(`amend`)\*\*과 \*\*과거 커밋 수정(`rebase -i`)\*\*을 명확히 구분했습니다.
2.  특히 **`rebase -i`의 다양한 명령어(pick, reword, edit, squash, drop)** 사용법을 상세히 정리했습니다.
3.  실수하기 쉬운 \*\*주의사항(Push 금지)\*\*까지 포함했습니다.

아래 내용을 복사하여 `git_commit_history_edit.md` 파일로 저장하세요.

-----

````markdown
# 26. 커밋 이력 수정 (Modifying Commit History)

## 1. 개요 (Overview)
* **목적**: 커밋 메시지에 오타가 있거나, 파일을 빼먹고 커밋했을 때, 또는 지저분한 커밋 히스토리를 정리하고 싶을 때 사용.
* **핵심 명령어**:
    1.  `git commit --amend`: 바로 직전(최신) 커밋 수정.
    2.  `git rebase -i`: 과거의 여러 커밋을 대화형으로 수정.

---

## 2. 최신 커밋 수정하기 (`--amend`)
* **상황**: 방금 막 커밋(`HEAD`)을 했는데 실수를 발견했을 때.

### 2.1 커밋 메시지만 수정할 때
* 편집기를 열어서 수정하거나, 명령어로 바로 수정 가능.
```bash
# 방법 1: 기본 에디터(Vim, VS Code 등)를 열어서 수정
$ git commit --amend

# 방법 2: 명령어로 메시지 바로 덮어쓰기 (간편)
$ git commit --amend -m "수정할 새로운 메시지"
````

  * **결과**: 기존 커밋이 사라지고, 새로운 ID(해시)를 가진 커밋으로 대체됨.

### 2.2 파일 내용을 빠뜨렸을 때 (내용 수정)

  * **상황**: 파일을 `add` 하지 않고 커밋했거나, 코드에 오타가 있을 때.

<!-- end list -->

```bash
# 1. 빠뜨린 파일 추가 or 파일 수정
$ echo "누락된 내용" >> f
$ git add f

# 2. amend 옵션으로 재커밋 (메시지는 그대로 유지하거나 수정 가능)
$ git commit --amend
# (에디터가 열리면 그대로 저장 후 종료)
```

  * **효과**: 별도의 "수정 커밋"을 새로 만들지 않고, 방금 한 커밋에 내용을 슬쩍 끼워 넣음.

-----

## 3\. 과거의 여러 커밋 수정하기 (`rebase -i`)

  * **Interactive Rebase**: 과거의 커밋들을 내 입맛대로 골라서 수정, 삭제, 통합하는 강력한 도구.

### 3.1 대화형 모드 진입

  * 수정하고 싶은 커밋의 **직전(부모) 커밋**이나 **개수**를 지정.

<!-- end list -->

```bash
# 최신 커밋으로부터 3개 전까지의 이력을 수정하고 싶을 때
$ git rebase -i HEAD~3

# 특정 커밋 ID 이전부터 수정하고 싶을 때
$ git rebase -i [커밋ID]
```

### 3.2 에디터 설정 화면과 명령어 (중요\!)

  * 명령어를 실행하면 에디터가 열리며 커밋 목록이 뜸 (오래된 커밋이 위쪽에 위치).
  * 각 커밋 앞에 있는 단어(`pick`)를 수정하여 작업을 지시함.

| 명령어 | 단축어 | 설명 | 활용 예시 |
| :--- | :--- | :--- | :--- |
| **pick** | `p` | 커밋을 그대로 사용함 (수정 없음). | 기본값 |
| **reword** | `r` | 커밋 **메시지**만 수정함. | 메시지 오타 수정 시 |
| **edit** | `e` | 커밋의 \*\*내용(파일)\*\*을 수정함. | 코드 수정 필요 시 |
| **squash** | `s` | 이전 커밋(위쪽)과 **합침**. | 자잘한 커밋 통합 시 |
| **drop** | `d` | 해당 커밋을 **삭제함**. | 필요 없는 커밋 제거 |

-----

## 4\. [실습] 상황별 수정 방법

### 4.1 특정 커밋 삭제하기 (Drop)

  * **목표**: 중간에 실수로 들어간 커밋을 아예 없애고 싶음.

<!-- end list -->

1.  `git rebase -i HEAD~3` 실행.
2.  에디터에서 삭제할 커밋의 `pick`을 **`drop`** (또는 `d`)으로 변경.
    ```text
    pick a1b2c3d 커밋1
    drop e4f5g6h 실수한 커밋  <-- 이 줄을 drop으로 변경
    pick h7i8j9k 커밋3
    ```
3.  저장하고 닫으면 해당 커밋이 역사 속에서 사라짐.

### 4.2 여러 커밋 하나로 합치기 (Squash)

  * **목표**: "오타 수정", "버그 수정" 같은 자잘한 커밋들을 하나로 뭉치고 싶음.

<!-- end list -->

1.  `git rebase -i HEAD~3` 실행.
2.  합칠 커밋(아래쪽)의 `pick`을 **`squash`** (또는 `s`)로 변경.
    ```text
    pick a1b2c3d 기능 구현 시작 (기준)
    s    e4f5g6h 오타 수정     <-- 위 커밋에 합쳐짐
    s    h7i8j9k 버그 수정     <-- 위 커밋에 합쳐짐
    ```
3.  저장하면 새 메시지를 작성하는 창이 뜸. 메시지 정리 후 저장.

### 4.3 과거 커밋의 메시지 수정 (Reword)

1.  `git rebase -i HEAD~3` 실행.
2.  수정할 커밋 앞을 **`reword`** (또는 `r`)로 변경.
    ```text
    reword a1b2c3d 잘못쓴 메시지
    pick   e4f5g6h ...
    ```
3.  저장하면 잠시 후 해당 메시지를 수정할 수 있는 에디터가 따로 뜸.

-----

## 5\. 핵심 주의사항 (Warning)

  * **"절대 원격 저장소(Remote)에 Push한 커밋은 수정하지 말 것\!"**
  * **이유**:
      * `amend`나 `rebase`는 기존 커밋을 버리고 **새로운 해시값을 가진 커밋**을 만듦.
      * 이미 팀원들과 공유된 커밋을 강제로 바꾸면, 팀원들의 저장소와 충돌이 발생해 헬게이트(Hell-gate)가 열림.
  * **결론**: 나만 가지고 있는(로컬) 커밋들만 수정해서 깔끔하게 만든 뒤 Push 할 것.

-----

## 6\. 요약 (Summary)

  * **직전 커밋 수정**: `$ git commit --amend`
  * **과거 이력 조작**: `$ git rebase -i HEAD~n`
      * **`reword`**: 메시지 수정
      * **`squash`**: 커밋 합치기
      * **`drop`**: 커밋 삭제