# Git 버전과 태그 활용 정리

## 📚 학습 목표

1. **소프트웨어 버전 표기법** 이해 (예: v1.45.3)
2. **태그 기능**을 통한 버전 관리
3. **일반 태그**와 **주석 태그**의 차이점과 활용법
4. 태그 생성, 조회, 삭제 작업 수행

---

## 1️⃣ 버전(Version)이란?

### 버전의 개념
- **정의**: 프로그램을 수정하거나 개선할 때마다 코드를 구분하기 위해 부여하는 식별자
- **표기 방식**: 
  - 두 자리: `1.0`
  - 세 자리: `2.1.4`
  - 연도.월 방식: `23.12` (일부 소프트웨어에서 사용)

### 예시
- **Git의 버전**: `2.39.0`
- **일반적인 버전**: `1.0`, `2.1.4` 등

---

## 2️⃣ SemVer (Semantic Versioning) 방식

### 기본 구조
```
major.minor.patch
```

### 각 자리 의미

#### 1. **Major (메이저) 번호**
- **첫 번째 자리 숫자**
- `0.x.x`: 초기 개발 중인 제품 (아직 정식 버전 아님)
- `1.0.0` 이상: 정식 버전 시작
- **변경 시기**: 기존 버전과 호환되지 않는 대규모 변경 사항이 있을 때

#### 2. **Minor (마이너) 번호**
- **두 번째 자리 숫자**
- **변경 시기**: 메이저 버전에서 새로운 기능 추가 또는 변경 사항이 있을 때
- 하위 호환성은 유지됨

#### 3. **Patch (패치) 번호**
- **세 번째 자리 숫자**
- **변경 시기**: 버그 수정 등 미미한 변화가 있을 때
- 기능 변경 없이 오류만 수정

### 예시
```
v3.34.5
- Major: 3 (정식 버전)
- Minor: 34 (34번의 기능 추가/변경)
- Patch: 5 (5번의 버그 수정)
```

---

## 3️⃣ Git 태그(Tag) 기능

### 태그란?
- **정의**: 특정 커밋(해시 값)에 버전 번호나 다른 이름을 부여하는 기능
- **용도**: 중요한 시점의 커밋을 쉽게 식별하고 관리
- **표기법**: 보통 `v`를 앞에 붙임 (예: `v1.4.0`)

### 태그의 두 가지 종류

#### 1. **주석 태그 (Annotated Tag)**
- **포함 정보**:
  - 태그 이름
  - 태그 작성자 이메일
  - 태그 생성 시각
  - 태그 메시지
- **특징**: 완전한 Git 객체로 저장됨
- **권장 사항**: 공식 릴리스에 주로 사용

#### 2. **일반 태그 (Lightweight Tag)**
- **포함 정보**: 태그 이름만
- **특징**: 단순히 커밋을 가리키는 포인터
- **용도**: 임시 태그나 개인적인 용도

---

## 4️⃣ 태그 명령어 상세 가이드

### 📌 주석 태그 생성

#### 기본 방법 (메시지 포함)
```bash
git tag -a v1.0.0 -m 'first version'
```
- `-a`: annotated tag (주석 태그) 생성
- `-m`: 태그 메시지 직접 입력
- 작성자 이메일, 날짜, 메시지 등 모든 정보 자동 포함

#### 편집기로 메시지 작성
```bash
git tag -a v1.0.0
```
- 기본 설정된 편집기가 열려 상세한 메시지 작성 가능
- VSCode 편집기 설정:
  ```bash
  git config --global core.editor 'code --wait'
  ```

#### 특정 커밋에 태그 붙이기
```bash
# 커밋 ID로 지정
git tag -a v1.1.0 commitID

# 상대 참조로 지정
git tag v1.1.0 HEAD~
```
- `HEAD~`: 현재 커밋의 바로 이전 커밋
- `-a` 없이도 가능 (주석 태그로 생성됨)

#### ⚠️ 주의사항
- **태그 이름 중복 불가**: 같은 이름의 태그는 생성할 수 없음

---

### 📌 일반 태그 생성

#### 기본 방법
```bash
git tag v1.0.1
```
- `-a`, `-m` 옵션 사용 **불가능**
- 태그 버전 정보만 관리 (메타데이터 없음)

#### 특징
- 빠르고 간단하게 생성
- 태그 이름 중복 불가능

---

### 📌 태그 목록 조회

#### 전체 태그 목록
```bash
git tag
```
- **출력 순서**: 예전 태그부터 표시 (생성 순서)
- **예시 출력**:
  ```
  v0.0.1
  v1.0.0
  v1.0.1
  ```

#### 비교: git log와의 차이
```bash
git log
```
- **출력 순서**: 최신 커밋부터 표시 (역순)

---

### 📌 태그 상세 정보 확인

#### 주석 태그 정보 보기
```bash
git show v1.0.0
```

#### 출력 예시
```
tag v1.0.0
Tagger: ai7dnn <ai7dnn@gmail.com>
Date: Tue Jan 17 22:29:55 2023 +0900
first version

commit 09b8fda7237ef8de960eb4c9eef164f58e94d8bc (HEAD -> main, tag: v1.0.0)
Author: ai7dnn <ai7dnn@gmail.com>
Date: Tue Jan 17 22:28:22 2023 +0900

    C

diff --git a/f b/f
index dbee026..1802a74 100644
--- a/f
+++ b/f
@@ -1,2 +1,3 @@
 aaa
 bbb
+ccc
```

#### 포함 정보
- **태그 이름**: `v1.0.0`
- **태그 작성자**: 이메일 포함
- **태그 시각**: 생성 날짜 및 시간
- **태그 메시지**: `first version`
- **커밋 정보**: 해당 커밋의 변경 사항 (diff)

---

### 📌 태그 삭제

#### 삭제 명령어
```bash
git tag -d v1.0.0
```

#### 출력 예시
```
Deleted tag 'v1.0.0' (was 09b8fda)
```
- `was 09b8fda`: 삭제된 태그가 가리키던 커밋 해시값

---

## 5️⃣ 실습 예제

### 🔹 실습 1: 저장소 생성과 일반 태그 활용

```bash
# ① 저장소 생성 및 이동
git init gtag
cd gtag

# ② 파일 생성 및 첫 커밋
echo aaa > f
git add f
git commit -m A

# ③ 현재 커밋에 일반 태그 붙이기
git log                    # 커밋 확인
git tag v0.0.1            # 일반 태그 생성
git log --oneline         # 태그 확인

# ④ 파일 수정 및 추가 커밋
echo bbb >> f
git commit -am B

echo ccc >> f
git commit -am C
```

---

### 🔹 실습 2: 주석 태그 활용과 관리

```bash
# ⑤ 주석 태그 생성
git log --oneline
git tag -a v1.0.0 -m 'first version'
git log --oneline
git show                   # 최신 커밋 정보
git show v1.0.0           # 태그 상세 정보

# ⑥ 태그 목록 확인
git tag                    # 태그 목록
git log --oneline         # 커밋 로그에서 태그 확인

# ⑦ 태그 삭제
git tag -d v0.0.1
# 출력: Deleted tag 'v0.0.1' (was 09b8fda)
git log --oneline         # 삭제 확인
```

---

### 🔹 실습 3: 이전 커밋에 태그 붙이기

```bash
# ⑧ 추가 커밋 생성
echo ddd >> f
git commit -am D

echo eee >> f
git commit -am E

# ⑨ 이전 커밋에 일반 태그 붙이기
git log --oneline         # 커밋 히스토리 확인
git tag                   # 현재 태그 목록
git tag v1.0.1 HEAD~     # 바로 이전 커밋에 태그

# ⑩ 결과 확인
git tag                   # 태그 목록
git log --oneline         # 로그에서 태그 위치 확인
git show v1.0.1          # v1.0.1 태그 정보
git show v1.0.0          # v1.0.0 태그 정보
```

---

## 📝 핵심 명령어 정리

| 작업 | 명령어 | 설명 |
|------|--------|------|
| **일반 태그 생성** | `git tag v1.0.1` | 태그 이름만 포함 |
| **주석 태그 생성** | `git tag -a v1.0.1 -m 'msg'` | 태그 이름 + 메타데이터 |
| **특정 커밋에 태그** | `git tag v1.0.1 HEAD~` | 이전 커밋에 태그 붙이기 |
| **태그 목록 조회** | `git tag` | 모든 태그 나열 |
| **태그 상세 정보** | `git show v1.0.1` | 태그 및 커밋 정보 출력 |
| **태그 삭제** | `git tag -d v1.0.1` | 지정한 태그 삭제 |

---

## 💡 실전 활용 팁

### 언제 어떤 태그를 사용할까?

#### 주석 태그 사용 권장
- ✅ 공식 릴리스 버전
- ✅ 프로덕션 배포 시점
- ✅ 중요한 마일스톤
- ✅ 팀과 공유하는 버전

#### 일반 태그 사용 권장
- ✅ 개인적인 임시 표시
- ✅ 테스트 버전
- ✅ 빠른 참조 포인트

### 태그 네이밍 컨벤션
```
v1.0.0        # 정식 릴리스
v1.0.0-beta   # 베타 버전
v1.0.0-rc1    # Release Candidate
v1.0.0-alpha  # 알파 버전
```